28.05.2019

Count distinct problem
----------------------

S = { a, b, a, c, d, e, b, c} - only 5 distinc elements from 8 all elements

Task: Count distinc elements

1. Remember all distinct elements
2. (approximate strategy) We would like to store only `k` elements. Flajoletâ€“Martin algorithm.

Example for hash function that returns 4 bit string

h(a) = 1010                     P[last == 0] = 1/2
h(b) = 1011                     P[last == 1] = 1/2
h(c) = 1000                     P[last == 00] = 1/2 * 1/2 = 1/4
h(d) = 1101
h(e) = 0100

hash function that returns bit string of length `t`

P[r last bits == 0] = 2^(-r)



Distribution of frequencies of different elements
-------------------------------------------------
The Alon-Matias Szegedy Algorithm for second moments

Lectures will be on the website.

04.06.2019

Counting Ones in a Window 

10110011111100101

N - size of window

Problem: counting 1's in k last elements  k <= N

Solution: TO traverse the last k elemenets and to count the 1's.

We divide the window into backets consisting of:
 - the timestamp of the right end
 - the number of 1's must be a power of 2 in each bucket
 ...101| 10110001| 0 |      11101|         1001         |  0    |    1    |    1       |0
        ---------     -----------         -----                      -         -
        two buckets of size 4      one bucket of size 2          two buckets of size 1
at least one 
bucket of size 8

The Datar-Gionis-Indyk-Motwani Algorithm

The rules of the division:
 - The roght end of a bucket is always 1.
 - every position with 1 is in some bucket
 - no position is in more than one bucket
 - there are one or two buckets of any given size
 - All sizes must be a power of 2
 - Buckets cannot decrease in size as we move to the left

 !! Decaying windows
 ------------------

 Example:
    The popularity of the movies.

    1. The tickets for the movie are not sold currently 
    2. The move sold n tickets in each of the last 10 weeks
    3. The movie sold 2n tickets in last week but nothing in previous weeks
